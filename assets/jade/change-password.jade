extends layout/layout

block vars
  - bodyClass = "func--change-password-page"
  - pageTitle = "!Change your password"
  - pageTitleDataL8n = "content:change-password/title"

block headerScripts

block headerContent
  li.tabs__item: a.tabs__link(href="./profile", data-l8n="content:profile/profile-link") !Profile
  li.tabs__item: a.tabs__link.clj--sign-out__link.func--sign-out__link(href="./sign-out", data-l8n="content:profile/sign-out-link") !Sign out

block content
  .middle-container
    h1.page-title(data-l8n="content:change-password/page-header")
      | !Change your password
    form.change-password.clj--change-password__form(action="./change-password-post", method="post", role="form")
      .validation-summary.clj--validation-summary
        .validation-summary__title
        ul.validation-summary__list
          li.validation-summary__item.clj--validation-summary__item(data-l8n="content:change-password/confirm-password-invalid-validation-message")
            | !Ensure your passwords match

      p.form-row.clj--current-password
        label.form-row__label(for="current-password")
          span.form-row__title(data-l8n="content:change-password/current-password")
            | !Current password
          span.form-row__validation.clj--registration-password__validation(data-l8n="content:change-password/password-invalid-validation-message")
            | !Password must be between 8 and 50 characters long
        input.form-row__input.func--current-password__input(type="password", id="current-password", name="current-password")

      p.form-row.clj--new-password
        label.form-row__label(for="new-password")
          span.form-row__title(data-l8n="content:change-password/new-password")
            | !New password
          span.form-row__validation.clj--registration-password__validation(data-l8n="content:change-password/password-invalid-validation-message")
            | !Password must be between 8 and 50 characters long
        input.form-row__input.func--new-password__input(type="password", id="new-password", name="new-password")

      p.form-row.clj--confirm-new-password
        label.form-row__label(for="confirm-new-password")
          span.form-row__title(data-l8n="content:change-password/verify-password")
            | !Verify password
        input.form-row__input.func--confirm-new-password__input(type="password", id="verify-password", name="confirm-new-password")
      .button-actions
        .button-actions__primary
          button.button.button--full-width.func--change-password__button(type="submit" data-l8n="content:change-password/form-button")
            | !Save changes
        .button-actions__secondary
          a.button.button--full-width.button--link.clj--change-password-cancel__link(href="./profile", data-l8n="content:change-password/cancel-button") !Cancel

block footerScripts
  if staticMode
    script.
      var form = document.getElementsByClassName('change-password')[0];
      form.addEventListener("submit", function (e) {
        e.preventDefault();
        var formAction = form.getAttribute('action') + "?";
        window.location = formAction;
      });
