extends layout/layout

block vars
  - bodyClass = "func--reset-password-page"
  - pageTitle = "!Reset your password"
  - pageTitleDataL8n = "content:reset-password-form/title"

block headerScripts

block headerContent
  a.header-nav__link(href="./profile", data-l8n="content:profile/profile-link") !Profile
  a.header-nav__link.clj--sign-out__link.func--sign-out__link(href="./sign-out", data-l8n="content:profile/sign-out-link") !Sign out

block content
  .single-column
    h1.page-title(data-l8n="content:reset-password-form/page-header")
      | !Reset your password
    form.reset-password.clj--reset-password__form(action="./reset-password-post", method="post", role="form")
      .validation-summary.clj--validation-summary
        .validation-summary__title
        ul.validation-summary__list
          li.validation-summary__item.clj--validation-summary__item(data-l8n="content:change-password-form/new-password-too-short-validation-message")
            | !Validation summary message

      p.form-row.clj--new-password
        label.form-row__label(for="new-password")
          span.form-row__title(data-l8n="content:reset-password-form/new-password")
            | !New password
        input.form-row__input.func--new-password__input(type="password", id="new-password", name="new-password")

      button.button.button--full-width-smallish-devices.func--reset-password__button(type="submit" data-l8n="content:reset-password-form/form-button")
        | !Reset password

block footerScripts
  if staticMode
    script.
      var form = document.getElementsByClassName('reset-password')[0];
      form.addEventListener("submit", function (e) {
        e.preventDefault();
        var formAction = form.getAttribute('action') + "?";
        window.location = formAction;
      });
